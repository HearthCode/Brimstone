<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Benchmarks and Profiling</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="3867a7e4-21e2-4e3b-934b-c1c4ae15efa9" /><meta name="Description" content="This section explains how to use the benchmarking tools for Brimstone, how to profile Brimstone code in Visual Studio, and how to write your own benchmarks." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Hearthstone Working Group<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="bbd3d95b-45e3-46e9-bd51-35ee4749d7b6.htm" title="Hearthstone Working Group" tocid="roottoc">Hearthstone Working Group</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="bbd3d95b-45e3-46e9-bd51-35ee4749d7b6.htm" title="Brimstone Developer Documentation" tocid="bbd3d95b-45e3-46e9-bd51-35ee4749d7b6">Brimstone Developer Documentation</a></div><div class="toclevel1 current" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="3867a7e4-21e2-4e3b-934b-c1c4ae15efa9.htm" title="Benchmarks and Profiling" tocid="3867a7e4-21e2-4e3b-934b-c1c4ae15efa9">Benchmarks and Profiling</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f230a982-28b6-4fd1-b0ce-c3decd883ab4.htm" title="Walkthrough: Benchmarking a single build" tocid="f230a982-28b6-4fd1-b0ce-c3decd883ab4">Walkthrough: Benchmarking a single build</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="4b0b00d6-f9a1-4eae-b880-892eb0d513fb.htm" title="Walkthrough: Benchmarking a series of builds" tocid="4b0b00d6-f9a1-4eae-b880-892eb0d513fb">Walkthrough: Benchmarking a series of builds</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="c5beb99b-5b2f-4287-b2e8-c787a10399eb.htm" title="Walkthrough: Creating new benchmarks" tocid="c5beb99b-5b2f-4287-b2e8-c787a10399eb">Walkthrough: Creating new benchmarks</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="8d25a5f6-350d-4ebb-9a3b-1cb6a60cf573.htm" title="Walkthrough: Code profiling in Visual Studio" tocid="8d25a5f6-350d-4ebb-9a3b-1cb6a60cf573">Walkthrough: Code profiling in Visual Studio</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img alt="HearthSim" width="64" height="64" src="../icons/HearthSim.png" /></td><td class="titleColumn">Benchmarks and Profiling</td></tr></table><span class="introStyle"></span> <p style="color: #dc143c; font-size: 8.5pt; font-weight: bold;">[This is preliminary documentation and is subject to change.]</p><div class="summary"><p>This section explains how to use the benchmarking tools for Brimstone, how to profile Brimstone code in Visual Studio, and how to write your own benchmarks.</p></div><div class="introduction"><p><em>Benchmarking</em> is the process of running a series of fixed performance tests on code in a controlled environment and measuring the amount of time the tests take to run. Benchmarks could include the number of games run per second, the number of games cloned per second or the time to perform a complicated game state tree search.
      </p><p>
        Our benchmarking strategy involves using the <strong>BrimstoneProfiler.Benchmarks</strong> test harness to run pre-defined tests in a semi-controlled environment. New benchmarks can be added by end users and benchmark times can be automatically compared across multiple builds of Brimstone.
      </p><p><em>Profiling</em> is the process of measuring the amount of time spent in each section or line of code to identify bottlenecks for optimization. We can use profiling to see what percentage of the total run-time each line of code takes to execute.
      </p><p>
        You can use any profiling tool you wish but we provide tutorials for using the <strong>Visual Studio Code Analysis</strong> profiler which is included with Visual Studio.
      </p><p>
        Benchmarks are a measure of how fast Brimstone performs. To improve performance, you can use profiling to identify and optimize slow portions of code relevant to the benchmarks, thereby improving the benchmark results.
      </p><p>
        The <a href="https://github.com/HearthSim/BrimstoneProfiler" target="_blank">BrimstoneProfiler</a> repository contains the tools required to benchmark Brimstone applications. You must have a clone of this repository present on the machine used to build Brimstone in order to run benchmarks. The repository is <em>not</em> necessary for Visual Studio profiling.
      </p><p>
        In the <strong>References</strong> section of the <strong>Benchmarks</strong> project, you must modify the Brimstone assembly reference to point to the build of Brimstone you wish to benchmark. Once you have done this, build the solution.
      </p><div class="alert"><table><tr><th><img src="../icons/AlertCaution.png" alt="Important note" /> Important</th></tr><tr><td><p>
          Always build the solution in Release configuration and always reference a Release build of <span class="code">Brimstone.dll</span>.
        </p></td></tr></table></div></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />In This Section</span></div><div id="ID0RBSection" class="collapsibleSection"><p><a href="f230a982-28b6-4fd1-b0ce-c3decd883ab4.htm">Walkthrough: Benchmarking a single build</a></p><p><a href="4b0b00d6-f9a1-4eae-b880-892eb0d513fb.htm">Walkthrough: Benchmarking a series of builds</a></p><p><a href="c5beb99b-5b2f-4287-b2e8-c787a10399eb.htm">Walkthrough: Creating new benchmarks</a></p><p><a href="8d25a5f6-350d-4ebb-9a3b-1cb6a60cf573.htm">Walkthrough: Code profiling in Visual Studio</a></p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID1RBSection" class="collapsibleSection"><h4 class="subHeading">Other Resources</h4><div class="seeAlsoStyle"><a href="https://github.com/HearthSim/BrimstoneProfiler" target="_blank">BrimstoneProfiler</a></div></div></div></div><div id="pageFooter" class="pageFooter"><a href="http://discord.me/hearthstoneworkinggroup">Join us on Discord</a><br /><p>Hearthstone Working Group 2016 - Part of HearthSim.info</p></div></body></html>